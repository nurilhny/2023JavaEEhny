{"remainingRequest":"D:\\workspace\\IdeaProjects\\2023javaEEHNY\\homework2\\demowms\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\IdeaProjects\\2023javaEEHNY\\homework2\\demowms\\src\\plugins\\download.js","dependencies":[{"path":"D:\\workspace\\IdeaProjects\\2023javaEEHNY\\homework2\\demowms\\src\\plugins\\download.js","mtime":1681203115000},{"path":"D:\\workspace\\IdeaProjects\\2023javaEEHNY\\homework2\\demowms\\babel.config.js","mtime":1681728649966},{"path":"D:\\workspace\\IdeaProjects\\2023javaEEHNY\\homework2\\demowms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685545148945},{"path":"D:\\workspace\\IdeaProjects\\2023javaEEHNY\\homework2\\demowms\\node_modules\\babel-loader\\lib\\index.js","mtime":1685545171187}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgZXJyb3JDb2RlIGZyb20gJ0AvdXRpbHMvZXJyb3JDb2RlJzsKaW1wb3J0IHsgYmxvYlZhbGlkYXRlIH0gZnJvbSAiQC91dGlscy9ydW95aSI7CmNvbnN0IGJhc2VVUkwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZShuYW1lLCBpc0RlbGV0ZSA9IHRydWUpIHsKICAgIHZhciB1cmwgPSBiYXNlVVJMICsgIi9jb21tb24vZG93bmxvYWQ/ZmlsZU5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICImZGVsZXRlPSIgKyBpc0RlbGV0ZTsKICAgIGF4aW9zKHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgdXJsOiB1cmwsCiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBnZXRUb2tlbigpCiAgICAgIH0KICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgY29uc3QgaXNCbG9iID0gYmxvYlZhbGlkYXRlKHJlcy5kYXRhKTsKICAgICAgaWYgKGlzQmxvYikgewogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdKTsKICAgICAgICB0aGlzLnNhdmVBcyhibG9iLCBkZWNvZGVVUklDb21wb25lbnQocmVzLmhlYWRlcnNbJ2Rvd25sb2FkLWZpbGVuYW1lJ10pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByaW50RXJyTXNnKHJlcy5kYXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKICByZXNvdXJjZShyZXNvdXJjZSkgewogICAgdmFyIHVybCA9IGJhc2VVUkwgKyAiL2NvbW1vbi9kb3dubG9hZC9yZXNvdXJjZT9yZXNvdXJjZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlc291cmNlKTsKICAgIGF4aW9zKHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgdXJsOiB1cmwsCiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBnZXRUb2tlbigpCiAgICAgIH0KICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgY29uc3QgaXNCbG9iID0gYmxvYlZhbGlkYXRlKHJlcy5kYXRhKTsKICAgICAgaWYgKGlzQmxvYikgewogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdKTsKICAgICAgICB0aGlzLnNhdmVBcyhibG9iLCBkZWNvZGVVUklDb21wb25lbnQocmVzLmhlYWRlcnNbJ2Rvd25sb2FkLWZpbGVuYW1lJ10pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByaW50RXJyTXNnKHJlcy5kYXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKICB6aXAodXJsLCBuYW1lKSB7CiAgICB2YXIgdXJsID0gYmFzZVVSTCArIHVybDsKICAgIGF4aW9zKHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgdXJsOiB1cmwsCiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBnZXRUb2tlbigpCiAgICAgIH0KICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgY29uc3QgaXNCbG9iID0gYmxvYlZhbGlkYXRlKHJlcy5kYXRhKTsKICAgICAgaWYgKGlzQmxvYikgewogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vemlwJwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2F2ZUFzKGJsb2IsIG5hbWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJpbnRFcnJNc2cocmVzLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIHNhdmVBcyh0ZXh0LCBuYW1lLCBvcHRzKSB7CiAgICBzYXZlQXModGV4dCwgbmFtZSwgb3B0cyk7CiAgfSwKICBhc3luYyBwcmludEVyck1zZyhkYXRhKSB7CiAgICBjb25zdCByZXNUZXh0ID0gYXdhaXQgZGF0YS50ZXh0KCk7CiAgICBjb25zdCByc3BPYmogPSBKU09OLnBhcnNlKHJlc1RleHQpOwogICAgY29uc3QgZXJyTXNnID0gZXJyb3JDb2RlW3JzcE9iai5jb2RlXSB8fCByc3BPYmoubXNnIHx8IGVycm9yQ29kZVsnZGVmYXVsdCddOwogICAgTWVzc2FnZS5lcnJvcihlcnJNc2cpOwogIH0KfTs="},{"version":3,"names":["axios","Message","saveAs","getToken","errorCode","blobValidate","baseURL","process","env","VUE_APP_BASE_API","name","isDelete","url","encodeURIComponent","method","responseType","headers","then","res","isBlob","data","blob","Blob","decodeURIComponent","printErrMsg","resource","zip","type","text","opts","resText","rspObj","JSON","parse","errMsg","code","msg","error"],"sources":["D:/workspace/IdeaProjects/2023javaEEHNY/homework2/demowms/src/plugins/download.js"],"sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui'\nimport { saveAs } from 'file-saver'\nimport { getToken } from '@/utils/auth'\nimport errorCode from '@/utils/errorCode'\nimport { blobValidate } from \"@/utils/ruoyi\";\n\nconst baseURL = process.env.VUE_APP_BASE_API\n\nexport default {\n  name(name, isDelete = true) {\n    var url = baseURL + \"/common/download?fileName=\" + encodeURIComponent(name) + \"&delete=\" + isDelete\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then((res) => {\n      const isBlob = blobValidate(res.data);\n      if (isBlob) {\n        const blob = new Blob([res.data])\n        this.saveAs(blob, decodeURIComponent(res.headers['download-filename']))\n      } else {\n        this.printErrMsg(res.data);\n      }\n    })\n  },\n  resource(resource) {\n    var url = baseURL + \"/common/download/resource?resource=\" + encodeURIComponent(resource);\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then((res) => {\n      const isBlob = blobValidate(res.data);\n      if (isBlob) {\n        const blob = new Blob([res.data])\n        this.saveAs(blob, decodeURIComponent(res.headers['download-filename']))\n      } else {\n        this.printErrMsg(res.data);\n      }\n    })\n  },\n  zip(url, name) {\n    var url = baseURL + url\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then((res) => {\n      const isBlob = blobValidate(res.data);\n      if (isBlob) {\n        const blob = new Blob([res.data], { type: 'application/zip' })\n        this.saveAs(blob, name)\n      } else {\n        this.printErrMsg(res.data);\n      }\n    })\n  },\n  saveAs(text, name, opts) {\n    saveAs(text, name, opts);\n  },\n  async printErrMsg(data) {\n    const resText = await data.text();\n    const rspObj = JSON.parse(resText);\n    const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']\n    Message.error(errMsg);\n  }\n}\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,MAAM,QAAQ,YAAY;AACnC,SAASC,QAAQ,QAAQ,cAAc;AACvC,OAAOC,SAAS,MAAM,mBAAmB;AACzC,SAASC,YAAY,QAAQ,eAAe;AAE5C,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,gBAAgB;AAE5C,eAAe;EACbC,IAAIA,CAACA,IAAI,EAAEC,QAAQ,GAAG,IAAI,EAAE;IAC1B,IAAIC,GAAG,GAAGN,OAAO,GAAG,4BAA4B,GAAGO,kBAAkB,CAACH,IAAI,CAAC,GAAG,UAAU,GAAGC,QAAQ;IACnGX,KAAK,CAAC;MACJc,MAAM,EAAE,KAAK;MACbF,GAAG,EAAEA,GAAG;MACRG,YAAY,EAAE,MAAM;MACpBC,OAAO,EAAE;QAAE,eAAe,EAAE,SAAS,GAAGb,QAAQ;MAAG;IACrD,CAAC,CAAC,CAACc,IAAI,CAAEC,GAAG,IAAK;MACf,MAAMC,MAAM,GAAGd,YAAY,CAACa,GAAG,CAACE,IAAI,CAAC;MACrC,IAAID,MAAM,EAAE;QACV,MAAME,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACJ,GAAG,CAACE,IAAI,CAAC,CAAC;QACjC,IAAI,CAAClB,MAAM,CAACmB,IAAI,EAAEE,kBAAkB,CAACL,GAAG,CAACF,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;MACzE,CAAC,MAAM;QACL,IAAI,CAACQ,WAAW,CAACN,GAAG,CAACE,IAAI,CAAC;MAC5B;IACF,CAAC,CAAC;EACJ,CAAC;EACDK,QAAQA,CAACA,QAAQ,EAAE;IACjB,IAAIb,GAAG,GAAGN,OAAO,GAAG,qCAAqC,GAAGO,kBAAkB,CAACY,QAAQ,CAAC;IACxFzB,KAAK,CAAC;MACJc,MAAM,EAAE,KAAK;MACbF,GAAG,EAAEA,GAAG;MACRG,YAAY,EAAE,MAAM;MACpBC,OAAO,EAAE;QAAE,eAAe,EAAE,SAAS,GAAGb,QAAQ;MAAG;IACrD,CAAC,CAAC,CAACc,IAAI,CAAEC,GAAG,IAAK;MACf,MAAMC,MAAM,GAAGd,YAAY,CAACa,GAAG,CAACE,IAAI,CAAC;MACrC,IAAID,MAAM,EAAE;QACV,MAAME,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACJ,GAAG,CAACE,IAAI,CAAC,CAAC;QACjC,IAAI,CAAClB,MAAM,CAACmB,IAAI,EAAEE,kBAAkB,CAACL,GAAG,CAACF,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;MACzE,CAAC,MAAM;QACL,IAAI,CAACQ,WAAW,CAACN,GAAG,CAACE,IAAI,CAAC;MAC5B;IACF,CAAC,CAAC;EACJ,CAAC;EACDM,GAAGA,CAACd,GAAG,EAAEF,IAAI,EAAE;IACb,IAAIE,GAAG,GAAGN,OAAO,GAAGM,GAAG;IACvBZ,KAAK,CAAC;MACJc,MAAM,EAAE,KAAK;MACbF,GAAG,EAAEA,GAAG;MACRG,YAAY,EAAE,MAAM;MACpBC,OAAO,EAAE;QAAE,eAAe,EAAE,SAAS,GAAGb,QAAQ;MAAG;IACrD,CAAC,CAAC,CAACc,IAAI,CAAEC,GAAG,IAAK;MACf,MAAMC,MAAM,GAAGd,YAAY,CAACa,GAAG,CAACE,IAAI,CAAC;MACrC,IAAID,MAAM,EAAE;QACV,MAAME,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACJ,GAAG,CAACE,IAAI,CAAC,EAAE;UAAEO,IAAI,EAAE;QAAkB,CAAC,CAAC;QAC9D,IAAI,CAACzB,MAAM,CAACmB,IAAI,EAAEX,IAAI,CAAC;MACzB,CAAC,MAAM;QACL,IAAI,CAACc,WAAW,CAACN,GAAG,CAACE,IAAI,CAAC;MAC5B;IACF,CAAC,CAAC;EACJ,CAAC;EACDlB,MAAMA,CAAC0B,IAAI,EAAElB,IAAI,EAAEmB,IAAI,EAAE;IACvB3B,MAAM,CAAC0B,IAAI,EAAElB,IAAI,EAAEmB,IAAI,CAAC;EAC1B,CAAC;EACD,MAAML,WAAWA,CAACJ,IAAI,EAAE;IACtB,MAAMU,OAAO,GAAG,MAAMV,IAAI,CAACQ,IAAI,EAAE;IACjC,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAAC;IAClC,MAAMI,MAAM,GAAG9B,SAAS,CAAC2B,MAAM,CAACI,IAAI,CAAC,IAAIJ,MAAM,CAACK,GAAG,IAAIhC,SAAS,CAAC,SAAS,CAAC;IAC3EH,OAAO,CAACoC,KAAK,CAACH,MAAM,CAAC;EACvB;AACF,CAAC"}]}